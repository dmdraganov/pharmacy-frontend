import{a as e,d as t,h as n,i as r,m as i,p as a,s as o,u as s,y as c}from"./index-DjElomVe.js";var l=c(),u=a(),d=(0,l.memo)(({item:t})=>{let{updateQuantity:n,removeFromCart:a}=i(),[o,c]=(0,l.useState)(null);return(0,l.useEffect)(()=>{r(t.image).then(c)},[t.image]),(0,u.jsxs)(`div`,{className:`flex items-start gap-4 pt-4`,children:[(0,u.jsx)(`img`,{src:o??void 0,alt:t.name,className:`h-16 w-16 rounded object-cover`}),(0,u.jsxs)(`div`,{className:`flex-grow`,children:[(0,u.jsx)(`p`,{className:`font-semibold`,children:t.name}),(0,u.jsxs)(`p`,{className:`text-sm text-text-muted`,children:[t.price,` ₽`]})]}),(0,u.jsxs)(`div`,{className:`flex flex-col items-end gap-2`,children:[(0,u.jsx)(e,{quantity:t.quantity,onIncrement:()=>n(t.id,t.quantity+1),onDecrement:()=>n(t.id,t.quantity-1)}),(0,u.jsx)(s,{variant:`danger`,size:`small`,onClick:()=>a(t.id),children:`Удалить`})]})]})});const f=(0,l.memo)(()=>{let{cartItems:e,totalItems:t,selectedItemsTotal:r}=i(),a=Object.values(e);return a.length===0?(0,u.jsxs)(`div`,{className:`rounded-lg border border-border-default bg-background-default p-6`,children:[(0,u.jsx)(`h2`,{className:`mb-4 text-xl font-bold text-text-heading`,children:`Ваш заказ`}),(0,u.jsx)(`p`,{children:`Ваша корзина пуста.`}),(0,u.jsx)(s,{as:n,to:`/`,className:`mt-4 w-full`,children:`Вернуться к покупкам`})]}):(0,u.jsxs)(`div`,{className:`rounded-lg border border-border-default bg-background-default p-6`,children:[(0,u.jsx)(`h2`,{className:`mb-4 text-xl font-bold text-text-heading`,children:`Ваш заказ`}),(0,u.jsx)(`div`,{className:`flex flex-col gap-4 divide-y divide-border-default`,children:a.map(e=>(0,u.jsx)(d,{item:e},e.id))}),(0,u.jsxs)(`div`,{className:`mt-6 border-t border-border-default pt-4`,children:[(0,u.jsxs)(`div`,{className:`flex justify-between`,children:[(0,u.jsxs)(`span`,{children:[`Товары (`,t,` шт.)`]}),(0,u.jsxs)(`span`,{children:[r,` ₽`]})]}),(0,u.jsxs)(`div`,{className:`mt-4 flex justify-between font-bold`,children:[(0,u.jsx)(`span`,{children:`Итого`}),(0,u.jsxs)(`span`,{children:[r,` ₽`]})]})]})]})}),p=[{id:`ph-1`,name:`Аптека №1 "Здоровье"`,address:`г. Москва, ул. Ленина, д. 10`,workingHours:`08:00 - 22:00`},{id:`ph-2`,name:`Фарма-сеть "Пульс"`,address:`г. Москва, ул. Центральная, д. 45`,workingHours:`09:00 - 21:00`},{id:`ph-3`,name:`Городская аптека №12`,address:`г. Москва, пр. Мира, д. 112`,workingHours:`24/7`}];var m=({onClick:e,isActive:t,children:n})=>(0,u.jsx)(`button`,{type:`button`,onClick:e,className:`flex-1 rounded-md px-4 py-2 text-center font-medium transition-colors cursor-pointer ${t?`bg-primary text-text-inverse shadow`:`bg-background-muted text-text-default hover:bg-background-muted-hover`}`,children:n}),h=()=>(0,u.jsxs)(`div`,{className:`flex flex-col gap-4`,children:[(0,u.jsx)(o,{name:`street`,placeholder:`Улица`}),(0,u.jsxs)(`div`,{className:`grid grid-cols-3 gap-4`,children:[(0,u.jsx)(o,{name:`house`,placeholder:`Дом`}),(0,u.jsx)(o,{name:`apartment`,placeholder:`Квартира`}),(0,u.jsx)(o,{name:`postalCode`,placeholder:`Индекс`})]})]}),g=()=>(0,u.jsx)(`div`,{className:`flex flex-col gap-3`,children:p.map(e=>(0,u.jsxs)(`label`,{className:`flex cursor-pointer items-start gap-3 rounded-lg border border-border-default p-3 has-[:checked]:border-primary has-[:checked]:bg-primary-ultrasubtle`,children:[(0,u.jsx)(`input`,{type:`radio`,name:`pickupPoint`,value:e.id,className:`mt-1`}),(0,u.jsxs)(`div`,{children:[(0,u.jsx)(`p`,{className:`font-semibold`,children:e.name}),(0,u.jsx)(`p`,{className:`text-sm text-text-muted`,children:e.address}),(0,u.jsx)(`p`,{className:`text-sm text-text-muted`,children:e.workingHours})]})]},e.id))});const _=(0,l.memo)(()=>{let[e,t]=(0,l.useState)(`courier`);return(0,u.jsxs)(`div`,{className:`rounded-lg border border-border-default bg-background-default p-6`,children:[(0,u.jsx)(`h2`,{className:`mb-4 text-xl font-bold text-text-heading`,children:`Способ получения`}),(0,u.jsxs)(`div`,{className:`mb-6 flex gap-2 rounded-lg bg-background-muted p-1`,children:[(0,u.jsx)(m,{onClick:()=>t(`courier`),isActive:e===`courier`,children:`Курьерская доставка`}),(0,u.jsx)(m,{onClick:()=>t(`pickup`),isActive:e===`pickup`,children:`Самовывоз`})]}),e===`courier`?(0,u.jsx)(h,{}):(0,u.jsx)(g,{})]})}),v=(0,l.memo)(()=>{let{user:e}=t(),[n,r]=(0,l.useState)(e);(0,l.useEffect)(()=>{r(e)},[e]);let i=e=>{let{name:t,value:n}=e.target;r(e=>({...e,[t]:n}))};return(0,u.jsxs)(`div`,{className:`rounded-lg border border-border-default bg-background-default p-6`,children:[(0,u.jsx)(`h2`,{className:`mb-4 text-xl font-bold text-text-heading`,children:`Контактные данные`}),(0,u.jsxs)(`div`,{className:`flex flex-col gap-4`,children:[(0,u.jsxs)(`div`,{className:`grid grid-cols-2 gap-4`,children:[(0,u.jsx)(o,{name:`firstName`,placeholder:`Имя`,value:n.firstName,onChange:i}),(0,u.jsx)(o,{name:`lastName`,placeholder:`Фамилия`,value:n.lastName,onChange:i})]}),(0,u.jsx)(o,{name:`email`,type:`email`,placeholder:`E-mail`,value:n.email,onChange:i}),(0,u.jsx)(o,{name:`phone`,type:`tel`,placeholder:`Телефон`,value:n.phone,onChange:i})]})]})});var y=[{id:`card`,label:`Картой онлайн`},{id:`sbp`,label:`Система быстрых платежей (СБП)`},{id:`cash`,label:`Наличными при получении`}];const b=(0,l.memo)(()=>{let[e,t]=(0,l.useState)(`card`);return(0,u.jsxs)(`div`,{className:`rounded-lg border border-border-default bg-background-default p-6`,children:[(0,u.jsx)(`h2`,{className:`mb-4 text-xl font-bold text-text-heading`,children:`Способ оплаты`}),(0,u.jsx)(`div`,{className:`flex flex-col gap-3`,children:y.map(n=>(0,u.jsxs)(`label`,{className:`flex cursor-pointer items-start gap-3 rounded-lg border border-border-default p-3 has-[:checked]:border-primary has-[:checked]:bg-primary-ultrasubtle`,children:[(0,u.jsx)(`input`,{type:`radio`,name:`paymentMethod`,value:n.id,checked:e===n.id,onChange:()=>t(n.id),className:`mt-1`}),(0,u.jsx)(`span`,{className:`font-semibold`,children:n.label})]},n.id))})]})}),x=(0,l.memo)(()=>{let{cartItems:e}=i();return(0,l.useMemo)(()=>Object.values(e).some(e=>e.isPrescription),[e])?(0,u.jsxs)(`div`,{className:`rounded-lg border border-warning-border bg-warning-subtle p-6`,children:[(0,u.jsx)(`h2`,{className:`mb-4 text-xl font-bold text-text-heading`,children:`Загрузка рецепта`}),(0,u.jsx)(`p`,{className:`mb-4 text-sm text-warning-text`,children:`Один или несколько товаров в вашем заказе требуют рецепта. Пожалуйста, загрузите скан или фотографию вашего рецепта. Оригинал потребуется предъявить при получении.`}),(0,u.jsxs)(`div`,{className:`flex flex-col gap-4`,children:[(0,u.jsxs)(`label`,{htmlFor:`prescription-upload`,className:`flex cursor-pointer flex-col items-center justify-center rounded-lg border-2 border-dashed border-border-default bg-background-default p-6`,children:[(0,u.jsx)(`span`,{children:`Нажмите, чтобы загрузить файл`}),(0,u.jsx)(`span`,{className:`text-xs text-text-muted`,children:`PNG, JPG или PDF`}),(0,u.jsx)(`input`,{id:`prescription-upload`,type:`file`,className:`sr-only`})]}),(0,u.jsxs)(`label`,{className:`flex items-start gap-2`,children:[(0,u.jsx)(`input`,{type:`checkbox`,name:`prescriptionConsent`,className:`mt-1`}),(0,u.jsx)(`span`,{className:`text-sm text-text-default`,children:`Я подтверждаю, что у меня есть действующий рецепт на данный препарат, и я предъявлю его при получении заказа.`})]})]})]}):null}),S=(0,l.memo)(({onConfirm:e,isProcessing:t})=>{let{selectedItemsTotal:n}=i();return(0,u.jsxs)(`div`,{className:`rounded-lg border border-border-default bg-background-default p-6`,children:[(0,u.jsxs)(`div`,{className:`mb-4 flex justify-between font-bold`,children:[(0,u.jsx)(`span`,{children:`Итого к оплате`}),(0,u.jsxs)(`span`,{children:[n,` ₽`]})]}),(0,u.jsx)(`p`,{className:`mb-4 text-xs text-text-muted`,children:`Нажимая кнопку «Подтвердить заказ», вы соглашаетесь с условиями продажи. После подтверждения заказ нельзя будет изменить.`}),(0,u.jsx)(s,{className:`w-full py-3 text-lg`,onClick:e,disabled:t,children:t?`Оформляем...`:`Подтвердить заказ`})]})});var C=()=>(0,u.jsxs)(`div`,{className:`flex flex-col items-center justify-center rounded-lg border border-border-default bg-background-default p-12 text-center`,children:[(0,u.jsx)(`h1`,{className:`mb-4 text-3xl font-bold text-success`,children:`Заказ успешно оформлен!`}),(0,u.jsx)(`p`,{className:`mb-6 text-text-default`,children:`Спасибо за покупку! Информация о заказе отправлена на ваш e-mail.`}),(0,u.jsx)(s,{as:n,to:`/`,variant:`primary`,children:`Вернуться на главную`})]}),w=(0,l.memo)(()=>{let{clearCart:e}=i(),[t,n]=(0,l.useState)(!1),[r,a]=(0,l.useState)(!1);return r?(0,u.jsx)(C,{}):(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(`h1`,{className:`mb-8 text-3xl font-bold text-text-heading`,children:`Оформление заказа`}),(0,u.jsxs)(`div`,{className:`grid grid-cols-1 gap-8 lg:grid-cols-3`,children:[(0,u.jsxs)(`main`,{className:`flex flex-col gap-6 lg:col-span-2`,children:[(0,u.jsx)(_,{}),(0,u.jsx)(v,{}),(0,u.jsx)(x,{}),(0,u.jsx)(b,{})]}),(0,u.jsx)(`aside`,{className:`lg:sticky lg:top-24 h-min`,children:(0,u.jsxs)(`div`,{className:`flex flex-col gap-6`,children:[(0,u.jsx)(f,{}),(0,u.jsx)(S,{onConfirm:()=>{n(!0),setTimeout(()=>{e(),n(!1),a(!0)},1500)},isProcessing:t})]})})]})]})});export{w as default};