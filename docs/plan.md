# План разработки интернет-аптеки

Настоящий план основан на архитектурной документации, ограничениях и гайдлайнах, изложенных в директории `/docs`.

## Этап 1: Настройка проекта

**Частично выполнено:**

- Проект инициализирован с использованием Vite, React и TypeScript.
- Установлены все необходимые зависимости.
- Настроены ESLint, Prettier и `tsconfig.json`.

**Предстоящие задачи на этапе 1:**

- **Задача 1.1: Формирование базовой структуры директорий**
  - Создать папки в соответствии с Feature-based архитектурой:
    - `src/app`
    - `src/data`
    - `src/entities`
    - `src/features`
    - `src/shared`

**Ключевые моменты конфигурации Tailwind CSS v4:**

- **Vite Plugin:** В `vite.config.ts` должен быть подключен плагин `@tailwindcss/vite`.

  ```ts
  import tailwindcss from '@tailwindcss/vite';
  import { defineConfig } from 'vite';

  export default defineConfig({
    plugins: [tailwindcss()],
  });
  ```

- **CSS Entry Point:** В основном CSS-файле (например, `src/index.css`) используется директива `@import "tailwindcss";` для включения стилей Tailwind.

## Этап 2: Определение данных и сущностей

- **Задача 2.1: Типизация моделей**
  - В `src/entities/` создать файлы с TypeScript-интерфейсами для основных сущностей: `Category`, `Subcategory`, `Product`.
  - **Важно:** согласно `docs/constraints.md`, для определения моделей следует использовать `interface`, а не `type`.

- **Задача 2.2: Создание моковых данных**
  - В `src/data/` создать статические массивы с данными для товаров, категорий и подкатегорий.

## Этап 3: Создание общего слоя (Shared)

- **Задача 3.1: Разработка UI-Kit**
  - Создать набор переиспользуемых UI-компонентов в `src/shared/ui/`: `Button`, `Input`, `Badge`, `Logo`, `Spinner` и т.д.
  - Компоненты не должны содержать бизнес-логики.

- **Задача 3.2: Создание общих компонентов-макетов**
  - `Header`: включает логотип, навигацию, панель поиска и иконки для корзины и избранного.
  - `Footer`: содержит ссылки и контактную информацию.
  - `ProductCard`: карточка для отображения товара в списках.
  - `PageLayout`: общая обертка для страниц, включающая `Header` и `Footer`.

- **Задача 3.3: Реализация утилит**
  - Создать хук `useLocalStorage` в `src/shared/lib/` для инкапсуляции логики сохранения состояния в `localStorage`. Это будет единственное место в приложении с прямым доступом к `localStorage`.

## Этап 4: Глобальное управление состоянием

- **Задача 4.1: Контекст корзины**
  - Определить `CartContext` и хук `useCart` внутри `src/features/cart/`.
  - Провайдер (`CartProvider`) разместить в `src/app/providers` и подключить в `main.tsx`, чтобы обернуть все приложение.
  - Логика: `addToCart`, `removeFromCart`, `updateQuantity`, `clearCart`.
  - Для персистентности использовать хук `useLocalStorage` из `shared`-слоя.

- **Задача 4.2: Контекст избранного**
  - По аналогии с корзиной, определить `FavoritesContext` и хук `useFavorites` в `src/features/favorites/`.
  - Провайдер (`FavoritesProvider`) разместить в `src/app/providers` и подключить в `main.tsx`.
  - Логика: `toggleFavorite`.
  - Для персистентности использовать хук `useLocalStorage`.

## Этап 5: Настройка маршрутизации

- **Задача 5.1: Конфигурация роутера**
  - В `src/app/` инициализировать `react-router-dom`.
  - Создать компонент `AppRouter`, определяющий все маршруты приложения.
  - Использовать `React.lazy` для ленивой загрузки страниц.

- **Задача 5.2: Определение маршрутов**
  - Настроить все пути согласно `docs/routes.md`:
    - `/` (Главная)
    - `/catalog`
    - `/catalog/:category`
    - `/catalog/:category/:subcategory`
    - `/cart`
    - `/favorites`
    - `/delivery`
    - `/product/:id`

## Этап 6: Реализация функций и страниц

- **Задача 6.1: Главная страница (`/`)**
  - Создать статическую главную страницу.

- **Задача 6.2: Каталог (`feature: catalog`)**
  - Реализовать страницу со списком категорий (`/catalog`).
  - Создать страницу для товаров определенной категории/подкатегории (`/catalog/:category/...`).
  - Реализовать пагинацию для списка товаров.

- **Задача 6.3: Страница товара (`feature: product-details`)**
  - Показать детальную информацию о товаре: изображение, название, бренд, цена, описание.
  - Добавить кнопку "Добавить в корзину" и иконку "Добавить в избранное".

- **Задача 6.4: Корзина (`feature: cart`)**
  - Отобразить список добавленных товаров, их количество и общую стоимость.
  - Реализовать "пустое" состояние корзины с кнопкой для перехода в каталог.

- **Задача 6.5: Избранное (`feature: favorites`)**
  - Отобразить список избранных товаров.
  - Реализовать "пустое" состояние с кнопкой для перехода в каталог.

- **Задача 6.6: Поиск (`feature: search`)**
  - Реализовать логику поиска по товарам в `Header`. Фильтрация выполняется на стороне клиента.

- **Задача 6.7: Статические страницы**
  - Создать страницу "Доставка и оплата" (`/delivery`).

## Этап 7: Финализация

- **Задача 7.1: Адаптивность**
  - Проверить и обеспечить корректное отображение всех страниц на мобильных устройствах и планшетах.

- **Задача 7.2: Оптимизация**
  - Применить `React.memo` где необходимо, чтобы избежать лишних ре-рендеров.
  - Настроить предзагрузку (preload) критически важных маршрутов.

- **Задача 7.3: Доступность (a11y)**
  - Проверить семантическую корректность разметки и доступность интерфейса для пользователей с ограниченными возможностями.
